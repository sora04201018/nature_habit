<div id="habit_card_<%= habit.id %>" class="border border-green-500 rounded-lg p-4 shadow-sm hover:shadow-lg">
  <h4 class="font-semibold text-lg text-gray-800 mb-2">ðŸŒ± <%= habit.title %></h4>
  <p class="text-sm text-gray-500 mb-4">é »åº¦: <%= t("activerecord.attributes.habit.frequency_values.#{habit.frequency}") %></p>

  <div class="flex gap-3 items-center">
    <!-- ï¼‘é€±é–“ã®æ—¥ä»˜æƒ…å ±ã‚’ä¸€ã¤ãšã¤dateã«å…¥ã‚Œã¦doã§å›žã™ -->
    <% week_dates.each do |date| %>
      <div class="flex flex-col items-center text-sm">
        <!-- å–ã‚Šå‡ºã—ãŸæ—¥ä»˜ã‚’strftimeã‚’ä½¿ã£ã¦ã€xx/xxæ—¥ã¨ã„ã†å½¢ã«å¤‰æ›(%m/%d) -->
        <div class="mb-1 text-xs text-gray-500"><%= date.strftime("%m/%d") %></div>

        <!-- any?ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€å–ã‚Šå‡ºã—ãŸdateãŒchecked_onã«ã‚ã‚‹ã‹ã©ã†ã‹ã‚’æ¤œè¨¼âž¡ï¸Žå¤‰æ•°checkedã«æ ¼ç´ -->
        <% checked = (checks_by_habit[habit.id] || []).any? { |c| c.checked_on == date } %>

        <!-- å¤‰æ•°checkedã‚’ä½¿ã£ã¦æ¡ä»¶åˆ†å²ã€‚trueãªã‚‰âœ“ã‚’falseãªã‚‰â—‹ã‚’å‡ºåŠ› -->
        <% if checked %>
          <% check = (checks_by_habit[habit.id] || []).find { |c| c.checked_on == date } %>
          <%= button_to habit_habit_check_path(habit, check), method: :delete, data: { turbo_stream: true }, class: "px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600" do %>
            âœ“
          <% end %>
        <% else %>
          <%= button_to habit_habit_checks_path(habit), method: :post, params: { checked_on: date }, data: { turbo_stream: true }, class: "px-2 py-1 bg-gray-200 rounded text-xs hover:bg-gray-300" do %>
            â—‹
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
