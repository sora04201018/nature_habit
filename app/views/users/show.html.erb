<!-- ▼▼ マイページカード ▼▼ -->
<div class="w-full flex justify-center mt-10">
  <div class="flex flex-col w-full max-w-md items-center justify-center bg-white rounded-2xl shadow-lg p-6 mb-10">
    <h2 class="text-2xl font-bold text-green-700 text-center mb-6">🌱 マイページ 🌱</h2>

    <p class="text-lg text-gray-800 mb-2">名前：<%= @user.name %></p>
    <p class="text-gray-600 mb-4">メールアドレス：<%= @user.email %></p>

    <div class="flex mt-6 justify-end">
      <%= link_to "編集", edit_user_registration_path,
          class: "inline-block bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded-lg shadow" %>
    </div>
  </div>

<!-- バッジ一覧 -->
  <h3 class="text-lg font-semibold mb-2">🏅 獲得バッジ</h3>
  <div class="flex flex-wrap gap-3">
    <% @user.badges.order(threshold: :asc).each do |badge| %>
      <div class="flex items-center gap-2 bg-white border p-3 rounded shadow">
        <% if badge.icon.present? %>
          <%= image_tag badge.icon, class:"w-8 h-8 rounded-full" %>
        <% else %>
        <!-- アイコンがなければ代替表示 -->
        <span class="w-8 h-8 flex items-center justify-center rounded bg-green-200">🏅</span>
        <% end %>

        <div class="font-semibold"><%= badge.name %></div>
        <div class="text-xs text-gray-500"><%= badge.description %></div>
      </div>

    <% end %>

    <% if @user.badges.empty? %>
      <p class="text-sm text-gray-500">まだバッジがありません。達成を重ねて獲得しましょう！</p>
    <% end %>
  </div>
</div>
